var cov_1hg1e8umyh=function(){var path="D:\\Shwetha\\Projects\\DIM\\cronjob\\videoUpdate.js",hash="10e57d050f337ba83573c7d8c3dcde83dc41ff4b",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"D:\\Shwetha\\Projects\\DIM\\cronjob\\videoUpdate.js",statementMap:{"0":{start:{line:1,column:23},end:{line:1,column:50}},"1":{start:{line:2,column:13},end:{line:2,column:28}},"2":{start:{line:3,column:14},end:{line:3,column:30}},"3":{start:{line:5,column:16},end:{line:5,column:40}},"4":{start:{line:6,column:14},end:{line:6,column:30}},"5":{start:{line:8,column:18},end:{line:8,column:39}},"6":{start:{line:9,column:11},end:{line:9,column:13}},"7":{start:{line:10,column:17},end:{line:10,column:18}},"8":{start:{line:11,column:18},end:{line:11,column:50}},"9":{start:{line:12,column:13},end:{line:12,column:54}},"10":{start:{line:14,column:16},end:{line:20,column:1}},"11":{start:{line:15,column:4},end:{line:15,column:37}},"12":{start:{line:17,column:18},end:{line:17,column:159}},"13":{start:{line:19,column:4},end:{line:19,column:30}},"14":{start:{line:22,column:15},end:{line:45,column:1}},"15":{start:{line:23,column:24},end:{line:23,column:39}},"16":{start:{line:25,column:4},end:{line:25,column:42}},"17":{start:{line:27,column:4},end:{line:27,column:61}},"18":{start:{line:28,column:4},end:{line:28,column:45}},"19":{start:{line:29,column:4},end:{line:29,column:30}},"20":{start:{line:30,column:4},end:{line:30,column:35}},"21":{start:{line:31,column:4},end:{line:31,column:26}},"22":{start:{line:32,column:4},end:{line:32,column:29}},"23":{start:{line:33,column:4},end:{line:33,column:49}},"24":{start:{line:34,column:4},end:{line:34,column:41}},"25":{start:{line:35,column:4},end:{line:35,column:66}},"26":{start:{line:37,column:4},end:{line:44,column:6}},"27":{start:{line:38,column:8},end:{line:43,column:9}},"28":{start:{line:39,column:12},end:{line:39,column:38}},"29":{start:{line:41,column:12},end:{line:41,column:41}},"30":{start:{line:42,column:12},end:{line:42,column:19}},"31":{start:{line:60,column:0},end:{line:60,column:32}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:14,column:16},end:{line:14,column:17}},loc:{start:{line:14,column:34},end:{line:20,column:1}},line:14},"1":{name:"(anonymous_1)",decl:{start:{line:22,column:15},end:{line:22,column:16}},loc:{start:{line:22,column:32},end:{line:45,column:1}},line:22},"2":{name:"(anonymous_2)",decl:{start:{line:37,column:21},end:{line:37,column:22}},loc:{start:{line:37,column:38},end:{line:44,column:5}},line:37}},branchMap:{"0":{loc:{start:{line:38,column:8},end:{line:43,column:9}},type:"if",locations:[{start:{line:38,column:8},end:{line:43,column:9}},{start:{line:38,column:8},end:{line:43,column:9}}],line:38}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"d34fc3e6b8297bcde183f5492bcb8fcb36775295"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const videoStreaming=(cov_1hg1e8umyh.s[0]++,require('express').Router());const http=(cov_1hg1e8umyh.s[1]++,require('http'));const https=(cov_1hg1e8umyh.s[2]++,require('https'));//const appRoot = require('app-root-path');
const cronJob=(cov_1hg1e8umyh.s[3]++,require('node-schedule'));const axios=(cov_1hg1e8umyh.s[4]++,require('axios'));//const logger = require(`${appRoot}/config/winston.config.js`);
var channelName=(cov_1hg1e8umyh.s[5]++,'indian cricket 2018');var body=(cov_1hg1e8umyh.s[6]++,'');var loopNumber=(cov_1hg1e8umyh.s[7]++,9);const videodata=(cov_1hg1e8umyh.s[8]++,require('../models/stats/video'));let appKey=(cov_1hg1e8umyh.s[9]++,"AIzaSyB4WM8u9WhYzY-LuchHKe04eQwGhuDfMJo");cov_1hg1e8umyh.s[10]++;var fetchData=async function(){cov_1hg1e8umyh.f[0]++;cov_1hg1e8umyh.s[11]++;console.log("inside fetch data");var details=(cov_1hg1e8umyh.s[12]++,await axios.get(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=indian%20cricket%202018&maxResults=${loopNumber}&key=${appKey}`));cov_1hg1e8umyh.s[13]++;return details.data.items;};cov_1hg1e8umyh.s[14]++;var addVideo=function(video){cov_1hg1e8umyh.f[1]++;const videoRecord=(cov_1hg1e8umyh.s[15]++,new videodata());cov_1hg1e8umyh.s[16]++;console.log("data saving in process");cov_1hg1e8umyh.s[17]++;videoRecord.videoDescription=video.snippet.description;cov_1hg1e8umyh.s[18]++;videoRecord.videoYtID=video.id.videoId;cov_1hg1e8umyh.s[19]++;videoRecord.videoURL="";cov_1hg1e8umyh.s[20]++;videoRecord.videoDuration="";cov_1hg1e8umyh.s[21]++;videoRecord.likes=0;cov_1hg1e8umyh.s[22]++;videoRecord.disLikes=0;cov_1hg1e8umyh.s[23]++;videoRecord.videoTitle=video.snippet.title;cov_1hg1e8umyh.s[24]++;videoRecord.createdDate=new Date();cov_1hg1e8umyh.s[25]++;videoRecord.thumbnails=video.snippet.thumbnails.default.url;cov_1hg1e8umyh.s[26]++;videoRecord.save((err,result)=>{cov_1hg1e8umyh.f[2]++;cov_1hg1e8umyh.s[27]++;if(err){cov_1hg1e8umyh.b[0][0]++;cov_1hg1e8umyh.s[28]++;console.log("error",err);}else{cov_1hg1e8umyh.b[0][1]++;cov_1hg1e8umyh.s[29]++;console.log("data is saved");cov_1hg1e8umyh.s[30]++;return;}});};// var j = cronJob.scheduleJob('*/20  * 23 * * *', async function () {
//     console.log("Entered videos cronJob");
//     var videodetails;
//     videodetails = await fetchData();
//     for (var index = 0; index < videodetails.length; index++) {
//         var videoItems = videodetails[index];
//         addVideo(videoItems);
//     }
//     console.log("Data inserted successfully");
// });
cov_1hg1e8umyh.s[31]++;module.exports=videoStreaming;